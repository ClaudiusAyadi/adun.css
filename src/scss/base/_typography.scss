@use "sass:map";
@use "sass:math";
@use "../abstracts/workers" as *;

// Use $fontFamily from /abstracts/workers
@mixin fontFamily {
	@each $font, $family in $fontFamily {
		--#{$font}: #{$family};
	}
}

/* FLUID TYPOGRAPHY */
$min-vp: map-get($container, minWidth) * 1px;
$max-vp: map-get($container, maxWidth) * 1px;

@function fluid($min-size, $max-size, $min-vp: $min-vp, $max-vp: $max-vp, $unit: vw) {
	$slope: math.div($max-size - $min-size, $max-vp - $min-vp);
	$scale: calc($slope * 100);
	$intercept: calc($min-size - $slope * $min-vp);
	$min-size: $min-size;
	$max-size: $max-size;
	@return clamp(#{$min-size}, #{$scale}#{$unit} + #{$intercept}, #{$max-size});
}

$fluidity: (
	text-xxs: #{fluid(10px, 12px)},
	text-xs: #{fluid(12px, 14px)},
	text-s: #{fluid(14px, 16px)},
	text-m: #{fluid(16px, 18px)},
	text-l: #{fluid(18px, 20px)},
	text-xl: #{fluid(20px, 24px)},
	text-xxl: #{fluid(24px, 32px)},
	text-3xl: #{fluid(36px, 48px)},
	text-4xl: #{fluid(52px, 72px)},
);

/* "text-" VARIABLES */
@mixin fluidType {
	@each $text, $value in $fluidity {
		--#{$text}: #{$value};
	}
}

/* "text-" CLASSES */
@mixin textClasses {
	@each $text, $value in $fluidity {
		.#{text} {
			font-size: var(--#{text});
		}
	}
}
@include textClasses;

/* FONT WEIGHTS */
$fontWeights: (
	100: 100,
	200: 200,
	300: 300,
	400: 400,
	500: 500,
	600: 600,
	700: 700,
	800: 800,
	900: 900,
);

/* FONT WEIGHT VARIABLES */
@mixin fontWeights {
	@each $font, $weight in $fontWeights {
		--#{$font}: #{$weight};
	}
}

/* LINE HEIGHT */
$lineHeights: (
	line-off: 1,
	line-xxs: 1.1,
	line-xs: 1.2,
	line-s: 1.3,
	line-m: 1.4,
	line-l: 1.5,
	line-xl: 1.6,
	line-xxl: 1.7,
	line-3xl: 1.8,
);

/* "line-" VARIABLES */
@mixin lineHeights {
	@each $lineHeight, $value in $lineHeights {
		--#{$lineHeight}: #{$value};
	}
}

// DEFAULTS
[class*="text--"],
:is(h1, h2, h3, h4, h5, h6) {
	font-size: var(--font-size);
	font-family: var(--font-family);
	line-height: var(--line);
	text-rendering: optimizelegibility;
}

h1 {
	--font-size: var(--text-3xl);
	--font-family: var(--alt-font);
	--line: var(--line-xs);
}

h2 {
	--font-size: var(--text-xxl);
	--font-family: var(--alt-font);
	--line: var(--line-s);
}

h3 {
	--font-size: var(--text-xl);
	--font-family: var(--alt-font);
	--line: var(--line-s);
}

h4 {
	--font-size: var(--text-l);
	--font-family: var(--alt-font);
	--line: var(--line-s);
}

h5 {
	--font-size: var(--text-m);
	--font-family: var(--alt-font);
	--line: var(--line-s);
}

h6 {
	--font-size: var(--text-s);
	--font-family: var(--alt-font);
	--line: var(--line-m);
}
